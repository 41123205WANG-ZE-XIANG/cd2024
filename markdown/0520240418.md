---
Title: 41123205-W9
Date: 2024-04-18 19:57
Category: w9
Tags: 網誌編寫
Slug: 41123205-W9-blog
Author: 41123205
---

期中考週

<!-- PELICAN_END_SUMMARY -->

# 期中考週
對 Gemini 1.5 Pro 提問:

以下為利用 PID 控制 CoppeliaSim 鋼球平衡台場景的 ZMQ RemoteAPI Python 程式, 請利用 Python 模組將系統控制過程, 鋼球在平衡台上的 x 方向座標與 y 方向, 利用 matplotlib 畫出來. "這裡附上原本的 PID 控制程式碼" 

    import zmq
    import time
    import matplotlib.pyplot as plt
    import numpy as np  # 添加 NumPy 庫
    #... (您的現有程式碼) ...
    #主迴圈
    while time.time() < start_time + 
    simulation_time:
    # ... (您的 PID 控制邏輯) ...
    # 讀取鋼球位置
    # ... 
    # ... (您的 PID 控制邏輯) ...
    # 記錄數據
    time_axis.append(time.time() - start_time)
    x_axis.append(x)
    y_axis.append(y)
    # ... (您的現有程式碼) ...
    #關閉 ZMQ 連接
    #...
    #繪製圖表 (將以下程式碼添加到您的程式碼末尾)
    plt.figure(figsize=(10, 6))
    plt.subplot(2, 1, 1)
    plt.plot(time_axis, x_axis, label="x")
    plt.plot(time_axis, reference_x * 
    np.ones_like(time_axis), 
    label="reference_x")  # 使用 NumPy 創建參考線
    plt.xlabel("Time (s)")
    plt.ylabel("Position (m)")
    plt.legend()
    plt.subplot(2, 1, 2)
    plt.plot(time_axis, y_axis, label="y")
    plt.plot(time_axis, reference_y * 
    np.ones_like(time_axis), label="reference_y")  # 使用 NumPy 創建參考線
    plt.xlabel("Time (s)")
    plt.ylabel("Position (m)")
    plt.legend()
    plt.tight_layout()
    plt.show()
解釋：
導入 NumPy: 我們添加了 import numpy as np 以便使用 NumPy 函數創建參考線。
繪圖: 在主循環結束後，我們添加了繪圖代碼。
子圖: 我們創建了兩個子圖，一個用於 x 方向，另一個用於 y 方向。
繪製數據: 我們使用 plt.plot 繪製 x 和 y 軸的位置數據。
參考線: 我們使用 np.ones_like(time_axis) 創建與時間軸長度相同的數組，並將其乘以參考值 (reference_x 和 reference_y) 以創建參考線。
標籤和圖例: 我們添加了 x 和 y 軸標籤以及圖例。
顯示圖形: 最後，我們使用 plt.show() 顯示圖形。
現在，當您運行您的 PID 控制程式碼時，它將顯示一個圖形，其中包含 x 和 y 方向的位置以及相應的參考線。這將幫助您視覺化鋼球在平衡台上的控制過程。